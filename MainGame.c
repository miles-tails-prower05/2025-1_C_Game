#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <windows.h>
#include <stdbool.h>
#include <string.h>

#define UP 0
#define DOWN 1
#define LEFT 2
#define RIGHT 3
#define SUBMIT 4
#define cls system("cls")

int KeyControl();
int DrawMenu();
int GameStart();
void gotoxy(int x, int y) {
    COORD pos = { x, y };
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), pos);
}
int nu = 0;
int Grade = 1;
int GradeNum = 1;
int Warning = 0;
int Heart = 3;
int index = 0;
int shuffled[14];
int magic[17] = { 0 }; //0은 스펠(14/알로, 15/레파, 16/윙가), 1은 변신술, 2는 순간이동, 3은 역사력
//, 4는 마법방어술(11 스투, 12 엑스, 13 패트), 5는 약초학, 6은 마법이론, 7은 공중부양, 8은 진실의 포션
int SelectNum[9] = { 0 };
bool used_1[3] = { false, false, false };
bool used_2[3] = { false, false, false };
bool good = false;
char harry1[20][80] = {
        "          _                                                ",
        "      /b_,dM\\__,_                                         ",
        "    _/MMMMMMMMMMMm,                                       ",
        "   _YMMMMMMMMMMMM(                                       ",
        "  `MMMMMM/   /   \\                                      ",
        "   MMM|  __  / __/                             ",
        "   YMM/_/# \\__/# \\                        ",
        "   (.   \\__/  \\__/                              ",
        "     )       _,  |                              ",
        "_____/\     _   /                             ",
        "    \\  `._____,'                                          ",
        "     `..___(__                                            ",
        "              ``-.                                        ",
};
char fly_1[17][80] = {
        "             _            _.,----,                              ",
        " __  _.-._ / '-.        -  ,._  \\)                            ",
        "|  `-)_   '-.   \\       / < _ )/\" }                          ",
        "/__    '-.   \\   '-, ___(c-(6)=(6)                           ",
        " , `'.    `._ '.  _,'   >\\    \"  )                           ",
        " :;;,,'-._   '---' (  ( \"/`. -='/                            ",
        ";:;;:;;,  '..__    ,`-.`)'- '--'                            ",
        ";';:;;;;;'-._ /'._|   Y/   _/' \\                            ",
        "      '''\"._ F    |  _/ _.'._   `\\                          ",
        "             L    \\   \\/     '._  \\                         ",
        "      .-,-,_ |     `.  `'---,  \\_ _|                        ",
        "      //    'L    /  \\,   (\"--',=`)7                        ",
        "     | `._       : _,  \\  /'`-._L,_'-._                     ",
        "     '--' '-.\\__/ _L   .`'         './/                     ",
        "                 [ (  /                                        ",
        "                  ) `{                                         ",
        "                   \\__)                                        "
};
char fly_2[15][90] = {
        "                                                                         ..   ",
        "                                                                      .~::~:;. ",
        "                                                             ,-:!!;:;;::!!*:.  ",
        "        ,~.                                             ~$*;:::;;!*!!*!*!!     ",
        "     --..-;*!-~!,...                              .,~*!!;!!****=*;:;-,~;-      ",
        "    ,-;;!**!*===**=!~~~--.                     ,,;*:;;;~                       ",
        "   .:!!==*!!*===**!!!*===!~.                  ~=~:-                            ",
        "   ,;*!*==********!!*!!!;==;:;~,,,          ~;*~                               ",
        "   ,!===*!!;;*=**!;;;::!!**!!*~-;:-      .;!*:.                                ",
        "   ~=*=====*!**!;;::;;!****!;*~-=**!!!!!!*$*,                                  ",
        "   -*==$==*=*;!*;;!!;!;;;:;;;*~-*!-,,-~:~.                                     ",
        "   .~:!*==!**;!*!*!*=*****;;~.,. .                                             ",
        "   .~:;*==******==*;::~::~.                                                    ",
        "     ..,--:!~-;!;:-.                                                           ",
        "           .  ...                                                              "
};
char chair_1[12][35] = {
        " .-.________.---.________.-. ",
        " | |.-.-.-.-. L .-.-.-.-.| |",
        " | |                     | |",
        " | |                     | |",
        " | |                     | |",
        " |_|_____________________|_|",
        " / /                      \\ \\",
        ".-.------------------------.-.",
        "| |________________________| |",
        "| |_]                    [_| |",
        "| |                        | |",
        "[_]                        [_]"
};
char snake_2[19][68] = {
    "           /^\\/^\\                                                ",
    "         _|__|  O|                                                 ",
    "\\/     /~     \\_/ \\                                              ",
    " \\____|__________/  \\                                            ",
    "        \\_______      \\                                          ",
    "                `\\     \\                 \\                       ",
    "                  |     |                  \\                     ",
    "                 /      /                    \\                  ",
    "                /     /                       \\\\                ",
    "              /      /                         \\ \\              ",
    "             /     /                            \\  \\            ",
    "           /     /             _----_            \\   \\         ",
    "          /     /           _-~      ~-_         |   |         ",
    "         (      (        _-~    _--_    ~-_     _/   |         ",
    "          \\      ~-____-~    _-~    ~-_    ~-_-~    /          ",
    "            ~-_           _-~          ~-_       _-~           ",
    "               ~--______-~                ~-___-~              ",
    "                                                               ",
};
char box_1[20][65] = {
    "                            _.--.                             ",
    "                        _.-'_:-'||                            ",
    "                    _.-'_.-::::'||                            ",
    "               _.-:'_.-::::::'  ||                            ",
    "             .'`-.-:::::::'     ||                            ",
    "            /.'`;|:::::::'      ||_                           ",
    "           ||   ||::::::'     _.;._'-._                       ",
    "           ||   ||:::::'  _.-!oo @.!-._'-.                    ",
    "           \'.  ||:::::.-!()oo @!()@.-'_.|                    ",
    "            '.'-;|:.-'.&$@.& ()$%-'o.'\\U||                  ",
    "              `>'-.!@%()@'@_%-'_.-o _.|'||                    ",
    "               ||-._'-.@.-'_.-' _.-o  |'||                    ",
    "               ||=[ '-._.-\\U/.-'    o |'||                  ",
    "               || '-.]=|| |'|      o  |'||                    ",
    "               ||      || |'|        _| ';                   ",
    "               ||      || |'|    _.-'_.-'                    ",
    "               |'-._   || |'|_.-'_.-'                        ",
    "                '-._'-.|| |' `_.-'                           ",
    "                    '-.||_/.-'                               ",
    "                                                              ",
};
char glasses_2[18][60] = {
        "                             --.                        ",
        "       :.   :,            ,~    --                      ",
        "     .        ~.         .,      .,                     ",
        "    ,.         ;                   ,                    ",
        "   ..           ~      .,           ~                   ",
        "   .            ..     :            -                   ",
        "   .             =~===-             .                   ",
        " .~~ ..,         ~.   ;          ....!-                 ",
        " ,~~   -,        ,    ~         ;.   ..                 ",
        "   ~   .~       --    -,       -.   .                   ",
        "        .~      ,:    ,-      ~:    -                   ",
        "   ~     !,     .      *     -*     .                   ",
        "    -     .     -       ,    ,,    -,                   ",
        "     ;         .        -.        ,                     ",
        "     ..-     -.          ,..    .,.                     ",
        "       .,$=$,.              ,=$,                        ",
        "                                                       ",
};
char feather_3[14][65] = {
        "                                              ",
        "        .         . -                             .-  ,---  ",
        "          ..   ,,,.,-,~~~,.,,...,..  .      .,,--~:~-::,,,  ",
        "            .,.,,~~~~~,,~~~~~~~-..,--.   .-~,-,-~:~~~-~-.   ",
        "               ~-.-;~--;-,,~~---,-,-.::~~-,,--~:::~---. .   ",
        "              -.-~:-,,:;::::~------~:-,,-~::;;~-~~-,,,..    ",
        "               ,,,,-~--,,-~~:::::~~--~~~~~~~~---,.,,,,,.    ",
        "                ,,,.,-.,--~~---,,,,----~~---,--,..,,,       ",
        "                 .,.,-~,,,-.-~-.,--,,.,,-~~~~-,--,          ",
        "                   .,.,--.,.,.,--,..,,,,.,..,,,,,,          ",
        "                   .,.- ,,,..,,~~,,,,,,.,,,,...             ",
        "                            ,,-                             ",
        "                                                            ",
};
char book_1[10][33] = {
    "(\\                        ",
    "\\'\\                       ",
    " \\ '\\     __________      ",
    " / '|    ()_________)      ",
    " \\ '/     \\ ~~~~~~~~ \\     ",
    "   \\        \\ ~~~~~~   \\   ",
    "   ==).       \\__________\\ ",
    "  (__)         ()__________) ",
    "                           ",
};
char potion_1[12][100] = {
    "      ___                                          _                                ",
    "      )_(                                         [_]                               ",
    "      | |                                      .-'. '-.                            ",
    "    .-'-'-.       _                           /:;/ _.-'\\                           ",
    "   /-::_..-\\    _[_]_                         |:._   .-|                           ",
    "   )_     _(   /_   _\\      [-]               |:._     |                           ",
    "   |;::    |   )_``'_(    .-'-'-.     (-)     |:._     |                           ",
    "   |;::    |   |;:   |    :-...-:   .-'-'-.   |:._     |                           ",
    "   |;::    |   |;:   |    |;:   |   |-...-|   |:._     |                           ",
    "   |;::-.._|   |;:.._|    |;:.._|   |;:.._|   |:._     |                           ",
    "   `-.._..-'   `-...-'    `-...-'   `-...-'   `-.____.-'                           "
};
char potion_2[13][20] = {
        " _____             ",
        " `.___,'           ",
        "  (___)            ",
        "  <   >            ",
        "   ) (             ",
        "  /`-.\\           ",
        " /     \\          ",
        "/ _    _\\         ",
        ":,' `-.' `:        ",
        "|         |        ",
        ":         ;        ",
        " \\       /         ",
        "  `.___.'          "
};
char shield_1[16][30] = {
        "      *                  ",
        "       *   *             ",
        "     *    \\* / *        ",
        "       * --.:. *         ",
        "      *   * :\\ -        ",
        "        .*  | \\         ",
        "       * *     \\        ",
        "     .  *       \\       ",
        "      ..        /\\.     ",
        "     *          |\\)|     ",
        "   .   *         \\ |     ",
        "  . . *           |/\\    ",
        "     .* *         /  \\   ",
        "   *              \\ / \\  ",
        " *  .  *           \\   \\ ",
        "                       "
};
char shield_2[20][40] = {
    "   |\\                     /)   ",
    " /\\_\\\\__               (_//   ",
    "|   `>\\-`     _._       //`)  ",
    " \\ /` \\\\  _.-`:::`-._  //     ",
    "  `    \\|`    :::    `|/      ",
    "        |     :::     |       ",
    "        |.....:::.....|       ",
    "        |:::::::::::::|       ",
    "        |     :::     |       ",
    "        \\     :::     /       ",
    "         \\    :::    /        ",
    "          `-. ::: .-'         ",
    "           //`:::`\\\\           ",
    "          //   '   \\\\          ",
    "         |/         \\\\         ",
};
char shield_3[24][50] = {
        "                            /\\",
        "                           /  \\",
        "                          |    |",
        "                        --:'''':--",
        "                          :'_' :",
        "                          _:\"\":\\___",
        "           ' '      ____.' :::     '._",
        "          . *=====<<=)           \\    :",
        "           .  '      '-'-'\\_      /'._.'",
        "                            \\====:_ \"\"",
        "                           .'     \\\\",
        "                          :       :",
        "                         /   :    \\",
        "                        :   .      '.",
        "                        :  : :      :",
        "                        :__:-:__.;--'",
        "                        '-'   '-'",
};
char herb_1[20][40] = {
    "        .-.                          ",
    "  __   /   \\   __                  ",
    " (  `'.\\   /.'`  )                 ",
    "  '-._.(;;;)._.-'                   ",
    "  .-'  ,`\"`,  '-.                   ",
    " (__.-'/   \\'-.__)/)_               ",
    "        \\   /\\    / / )            ",
    "         '-'  |   \\/.-')            ",
    "         ,    | .'/\\'..)            ",
    "         |\\   |/  | \\_)            ",
    "         \\ |  |   \\_/               ",
    "          | \\ /                      ",
    "           \\|/    _,                ",
    "           /  __/ /                 ",
    "          | _/ _.'                   ",
    "          |/__ /                     ",
    "           \\                         ",
    "                                   "
};
char herb_2[15][40] = {
        "       __.....__                  ",
        "     .\" _  o    \".               ",
        "   .' O (_)     () o`.           ",
        "  .           O       .          ",
        " . ()   o__...__    O  .         ",
        ". _.--\"\"\"       \"\"\"--._ .        ",
        ":\"                     \";        ",
        " `-.__    :   :    __.-'         ",
        "      \"\"\"-:   :-\"\"\"              ",
        "         J     L                 ",
        "         :     :                 ",
        "        J       L                ",
        "        :       :                ",
        "        `._____.'                "
};
char brain[10][30] = {
        "      _---~~(~~-_.",
        "    _{        )   )",
        "  ,   ) -~~- ( ,-\' )_",
        " (  `-,_..`., )-- \'_,)",
        "( ` _)  (  -~( -_ `,  }",
        "(_-  _  ~_-~~~~`,  ,\' )",
        "  `~ -^(    __;-,((()))",
        "        ~~~~ {_ -_(()))",
        "               `\\  }",
        "                 { }"
};
char people_2[21][85] = {
        "                           ,////,",
        "                           /// 6|",
        "                           //  _|",
        "                          _/_,-'",
        "                     _.-/'/   \\   ,/;;",
        "                  ,-' /'  \\_   \\ / _/",
        "                  `\\ /     _/\\  ` /",
        "                    |     /,  `\\_/",
        "                    |     \\'",
        "          /\\_        /`      /\\",
        "        /' /_``--.__/\\  `,. /  \\",
        "       |_/`  `-._     `\\/  `\\   `.",
        "                 `-.__/'     `\\   |",
        "                               `\\  \\",
        "                                 `\\ \\ ",
        "                                   \\_\\__",
        "                                    \\___)"
};
char people_2_1[8][50] = {
        "                         _",
        "                     _( }",
        "           -=   _  <<  \\",
        "               `.\__/`/\\\\",
        "         -=      '--'\\\\  `",
        "              -=     //",
        "                     \\)"
};
char wall[17][69] = {
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|",
        "___|___|___|___|___|__",
        "_|___|___|___|___|___|"
};
char people_1[24][81] = {
        ".         _  .          .          .    +     .          .          .      .",
        "        .(_)          .            .            .            .       :",
        "        .   .      .    .     .     .    .      .   .      . .  .  -+-        .",
        "          .           .   .        .           .          /         :  .",
        "    . .        .  .      /.   .      .    .     .     .  / .      . ' .",
        "        .  +       .    /     .          .          .   /      .",
        "       .            .  /         .            .        *   .         .     .",
        "      .   .      .    *     .     .    .      .   .       .  .",
        "          .           .           .           .           .         +  .",
        "  . .        .  .       .   .      .    .     .     .    .      .   .",
        "",
        " .   +      .          ___/\\_._/~~\\_...__/\\__.._._/~\\        .         .   .",
        "       .          _.--'                              `--./\\          .   .",
        "           /~~\\/~\\                                         `-/~\\_            .",
        " .      .-'                                                      `-/\\_",
        "  _/\\.-'                                                          __/~\\/\\-.__",
        ".'                                                                           `."
};

char treasure[10][70] = {
    "                    ____...------------...____                  ",
    "               _.-\"` /o/__ ____ __ __  __ \\o\\_`\"-._             ",
    "             .'     / /                    \\ \\     '.           ",
    "             |____/_/________..____..________\\_\\____|           ",
    "             /   _/ \\_     <_o#\\__/#o_>     _/ \\_   \\          ",
    "             \\_________\\####/_________/                      ",
    "              |===\\!/========================\\!/===|         ",
    "              |==== .'.'^'.'.====|                          ",
    "              |  _\\o/   __  {.' __  '.} _   _\\o/  _|      "
};
char footpaint[10][50] = {
    "     _,-'`B                   _,-'`B",
    " _,-'     D               _,-'     D",
    "(   ,-.   D              (   ,-.   D",
    " `-'   `-'()              `-'   `-'()",
    "                                          ",
    "         ,-.   ,-.()              ,-.   ,-.()",
    "        (   `-'   D              (   `-'   D",
    "         `-._     D               `-._     D",
    "             `-._,B                   `-._,B"
};
char meal[7][50] = {
    "        )        (            ",
    "       (          )           ",
    "    __..---..__              ",
    ",-='  /  |  \\  `=-.         ",
    ":--..___________..--;        ",
    " \\.,_____________,./        ",
    "                             "
};
char punch[15][40] = {
    " .--.___.----.___.--._        ",
    " /|  |   |    |   |  | `--.   ",
    "/                          `. ",
    "|       |        |           |",
    "|       |        |      |     |",
    "|  `    |  `     |    ` |     |",
    "|    `  |      ` |      |   ` |",
    "'|  `    | ` ` `  |  ` ` |  `  |",
    "||`   `  |     `  |   `  |`   `|",
    "||  `    |  `     | `    |  `  |",
    "||    `  |   ` `  |    ` | `  `|",
    "|| `     | `      | ` `  |  `  |",
    "||  ___  |  ____  |  __  |  _  |",
    "| \\_____/ \\______/ \\____/ \\___/",
    "                              "
};
char mirror[19][32] = {
    "      //-----------\\\\  ",
    "     //       | |   | \\\\ ",
    "   //  \\__   /   \\ /  | \\\\",
    "  ||       \\|     |  / __||",
    "  ||         \\    | |_/  ||",
    "  ||\\     __  |   |/ __  ||",
    "  ||  \\__/   \\|   |_/  \\_||",
    "  ||  _    ___|  /  \\_   ||",
    "  ||_/ \\__/   |/_     \\_/||",
    "  ||          o  \\      _||",
    "  ||\\       / |    \\___/ ||",
    "  ||  \\___/   |     \\   /||",
    "  ||     |   / \\_    )-<_||",
    "  ||    /  /     \\  /    ||",
    "   \\\\ /   |      _><    //",
    "   //\\\\   |     /   \\ //\\\\",
    "  ||   \\\\-----------//   ||",
    " /||\\                   /||\\",
    "/____\\                 /____\\"
};
char tree[14][32] = {
    "        *                    ",
    "     *  *r*  *              ",
    "  * *a* ^Y^ *i* *           ",
    " *m*^Y^*^\\^*^Y^*s*         ",
    " ^Y^*\\*e*/*l*/*^Y^         ",
    " *\\*t*|Y^\\^Y|*l*/*        ",
    "*s*|Y^\\\\^/^//^Y|*a*       ",
    "^Y^\\\\_^\\\\\\//^_//^Y^     ",
    "^\\_^\\_\\_\\//_/_/^_/^     ",
    " ^^\\_^\\_\\\\/_/^_/^^       ",
    "   ^^\\_ \\// _/^^          ",
    "       \\_\\_/              ",
    "        /|\\               ",
    "       /\\\\/\\             ",
};
char book[10][60] = {
    "         .--.           .---.        .-.                 ",
    "      .---|--|   .-.     | A |  .---. |~|    .--.        ",
    "   .--|===|Ch|---|_|--.__| S |--|:::| |~|-==-|==|---.    ",
    "   |%%|NT2|oc|===| |~~|%%| C |--|   |_|~|CATS|  |___|-.  ",
    "   |  |   |ah|===| |==|  | I |  |:::|=| |    |GB|---|=|  ",
    "   |  |   |ol|   |_|__|  | I |__|   | | |    |  |___| |  ",
    "   |~~|===|--|===|~|~~|%%|~~~|--|:::|=|~|----|==|---|=|  ",
    "   ^--^---'--^---^-^--^--^---'--^---^-^-^-==-^--^---^-'  ",
    "                                                        ",
};
char flypeople[20][30] = {
    "               |/           ",
    "\\|           -<_/          ",
    "\\_>-           |\\         ",
    "(\\      .-.    | \\        ",
    "| \\_   c ,,)   > /        ",
    " \\   `-.\_/ -/  /         ",
    "  `-/          (          ",
    "     |          |         ",
    "      |         |         ",
    "      \\       |          ",
    "       |  ,  /\\          ",
    "       /`-._/  \\         ",
    "       |  _     \\        ",
    "      /  / \\     |       ",
    "      | /   \\    \\       ",
    "      )/     |   |        ",
    "     (_/     |  /         ",
    "             | \\         ",
    "              \\_)        ",
    "                           "
};
char dumbell[18][50] = {
    "		      ____                     ",
    "		     / __ \\                    ",
    "		    ( (__) )                   ",
    "		    _\\____/___                ",
    "		   /  |  |   /\\              ",
    "		  /_________/  \\_            ",
    "	         /          \\    \\         ",
    "	        /            \\    \\_       ",
    "	       /              \\     \\      ",
    "	      /    _     _     \\     \\_    ",
    "	     /    / |   //      \\      \\   ",
    "	    /    //||  //        \\      \\_ ",
    "	   /       || || __       \\       \\",
    "    /        || ||/__\\      \\       \\_",
    "   /         || ||/  \\\\     \\        \\",
    "  /         _||_ \\\\__//      \\        \\_",
    " /          ----  ----     __   \\         \\",
    "/________________________________\\__________\\"
};
char dragon[16][60] = {
    "         \\****__              ____             ",
    "         |    *****\\_      --/ *\\-__         ",
    "         /_          (_    ./ ,/----'     ",
    "           \\__         (_./  /                   ",
    "              \\__           \\___----^__          ",
    "               _/   _                  \\         ",
    "        |    _/  __/ )\"\\ _____         *\\      ",
    "        |\\__/   /    ^ ^       \\____      )      ",
    "         \\___--\"                    \\_____ )     ",
    "                                          \"    "
};
char ghost[18][40] = {
    "   .-.",
    "  .'   `.",
    "  :g g   :",
    "  : o    `.",
    " :         ``.",
    ":             `.",
    ":  :         .   `.",
    ":   :          ` . `.",
    " `.. :            `. ``;",
    "    `:;             `:'",
    "       :              `.",
    "        `.              `.     .",
    "          `'`'`'`---..,___`;.-'"
};
char mart[16][65] = {
    "  .        _________________________    .",
    "           UUUUUUUUUUUUUUUUUUUUUUUUU         ()",
    "     .     UUUUUUUUUUUUUUUUUUUUUUUUU ()  () (()",
    "  _________UUUUUUUUUUUUUUUUUUUUUUUUU()())()))()",
    "  UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU))",
    "()UUUUUUUUUU|| ___ || ___ || ___ ||UUUUUUUUUU()",
    "(()|__\\S/__||| ~|~ || ~|~ || ~|~ ||___\\S/__|()(",
    "))(|-------||| \"\"\" || \"\"\" || \"\"\" ||  _____ |()(",
    "(()|-------||| ___ ||/_0_\\|| ___ ||  ~|~|~ |(()",
    ")))|-------||| ~|~ |||\"\"\"||| ~|~ ||  \"\"\"\"\" |)()",
    "@@@@-------@||@@@@@|||'  |||@@@@@||@@@@@@@@@@@@",
    "____  '` .  ___________| |______________________"
};
char boom[10][20] = {
    "        .        ",
    "      .' |       ",
    "    .'   |       ",
    "    /`-._'       ",
    "   /   /         ",
    "  /   /          ",
    " /   /           ",
    "(`-./            ",
    " )               ",
    "'                "
};
char face[15][40] = {
    "      ////^\\\\",
    "      | ^   ^ |",
    "     @ (o) (o) @",
    "      |   <   |",
    "      |  ___  |",
    "       \\_____/",
    "     ____|  |____",
    "    /    \\__/    \\",
    "   /              \\",
    "  /\\_/|        |\\_/\\",
    " / /  |        |  \\ \\",
    "( <   |        |   > )",
    " \\ \\  |        |  / /",
    "  \\ \\ |________| / /",
    "   \\ \\|"
};

char castle[18][40] = {
    "T~~",
    "               |",
    "              /\"\\",
    "      T~~     |'| T~~",
    "  T~~ |    T~ WWWW|",
    "  |  /\"\\   |  |  |/\\T~~",
    " /\"\\ WWW  /\"\\ |' |WW|",
    "WWWWW/\\| /   \\|'/\\|/\"\\",
    "|   /__\\/]WWW[\\/__\\WWWW",
    "|\"  WWWW'|I_I|'WWWW'  |",
    "|   |' |/  -  \\|' |'  |",
    "|'  |  |LI=H=LI|' |   |",
    "|   |' | |[_]| |  |'  |",
    "|   |  |_|###|_|  |   |",
    "'---'--'-/___\\-'--'---'"
};
char police[16][40] = {
    "            _A",
    "         .'`\"`'.",
    "        /   , , \\",
    "       |   <\\^/> |",
    "       |  < (_) >|",
    "        /====\\",
    "       (.---._ _.-.)",
    "        |/   a` a |",
    "        (      _\\ |",
    "         \\    __  ;",
    "         |\\   .  /",
    "      _.'\\ '----;'-. ",
    "  _.-'  O ;-.__.'\\O `o.",
    " /o \\      \\/-.-\\/|    \\",
    " |    ;,     '.|\\| /"
};
char forest[20][80] = {
    " .@@@ ........ @@.... @@@@  . ............................  *  .....",
    " ....@@ ..... @ .... @ .............   ....... .....; .... *** .....",
    " .....\\@\\....@ .... @ ............................. #  .. *****  ...",
    "  @@@.. @@@@@  @@@@@@___.. ....... ...%..... ...  {###}  *******",
    " ....@-@..@ ..@......@@@\\...... %...... ....... <## ####>********",
    "   @@@@\\...@ @ ........\\@@@@ ..... ...... ....... {###}***********",
    " ....%..@  @@ /@@@@@ . ....... ...............<###########> *******",
    " ...... .@-@@@@ ...V......     .... %.......... {#######}******* ***",
    " ...... .  @@ .. ..v.. .. . { } ............<###############>*******",
    " ......... @@ .... ........ {^^,     .......   {## ######}***** ****",
    " ..%..... @@ .. .%.... . .. (   `-;   ... <###################> ****",
    " . .... . @@ . .... .. _  .. `;;~~ ......... {#############}********",
    " .... ... @@ ... ..   /(______); .. ....<################  #####>***",
    " . .... ..@@@ ...... (         (  .........{##################}*****",
    " ......... @@@  ....  |:------( )  .. <##########################>**",
    "  @@@@ ....@@@  ... _// ...... \\\\ ...... {###   ##############}*****",
    " @@@@@@@  @@@@@ .. / /@@@@@@@@@ vv  <##############################>",
    " @@@@@@@ @@@@@@@ @@@@@@@@@@@@@@@@@@@ ..... @@@@@@  @@@@@@@  @@@@",
    " @@@@@@###@@@@@### @@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
};
char lucky[17][65] = {
    "                 ***          ***",
    "              ***....**     **...***",
    "             **........** **.......**",
    "      ***    **..........*.........**    ***",
    "   **.....**  **..................**  **.....**",
    " **.........**  **..............**  **.........**",
    "*..............*   *..........*   *..............*",
    " **..............*   *......*   *..............**",
    "   **..............** *....* **..............**",
    "     *......................................*",
    "   **..............**........**..............**",
    " **..............*    *....*    *..............**",
    "*..............*      *....*      *..............*",
    " **.........**        *....*        **.........**",
    "   **.....**         *....*           **.....**",
    "      ***          **....*               ***",
    "                 ** * * *"
};





void shuffle_array() {
    for (int i = 0; i < 14; i++) {
        shuffled[i] = i + 1;
    }

    for (int i = 13; i > 0; i--) {
        int j = rand() % (i + 1);
        int temp = shuffled[i];
        shuffled[i] = shuffled[j];
        shuffled[j] = temp;
    }
}

int main() {
    int Startnum;
    srand(time(NULL));
    shuffle_array();
    Startnum = DrawMenu();
    printf("%d", Startnum);
    if (Startnum == 0)
    {
        printf("%d", GameStart());
        if (GameStart() == 1)
        {
            GameStart();
        }
    }
    /*
    else if (Startnum == 1)
    {
        //게임 정보
    }
    else
    {
        return 0;
    }
    */
    return 0;
}
void Transfiguration() {
    cls;
    if (SelectNum[0] == 0)
    {
        for (int i = 0; i < 12; i++) {
            gotoxy(30, i);
            printf("%s\n", chair_1[i]);
        }
        gotoxy(16, 13);
        printf("학생들이 알아보지 못할 정도의 사물 변신 능력을 얻었다! (변신력 +1)");
        gotoxy(0, 16);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        magic[1] = 1;
        SelectNum[0]++;
        good = true;
    }
    else if (SelectNum[0] == 1)
    {
        for (int i = 0; i < 19; i++) {
            gotoxy(25, i);
            printf("%s\n", snake_2[i]);
        }
        gotoxy(26, 19);
        printf("교수님이 알아보지 못할 정도의 동물 변신 능력을 얻었다! (변신력 +1)");
        gotoxy(0, 23);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        magic[1] = 2;
        SelectNum[0]++;
        good = true;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void Spells() {
    cls;
    int r = 0;
    while (SelectNum[1] < 3) {
        srand(time(NULL));
        r = (rand() % 3) + 1;  // 1~3 중 무작위
        if (!used_1[r - 1]) {
            used_1[r - 1] = true; // 이미 사용 표시
            SelectNum[1]++;
            break;
        }
    }
    if (r == 1) {
        for (int i = 0; i < 20; i++) {
            gotoxy(30, i);
            printf("%s\n", box_1[i]);
        }
        gotoxy(31, 21);
        printf("잠긴 것을 여는 주문을 배웠다! (알로호모라 습득)");
        gotoxy(0, 24);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        good = true;
        magic[14] = 1;
    }
    else if (r == 2)
    {
        for (int i = 0; i < 18; i++) {
            gotoxy(30, i);
            printf("%s\n", glasses_2[i]);
        }
        gotoxy(27, 19);
        printf("부서진 물건을 수리하는 주문을 배웠다! (레파로 습득)");
        gotoxy(0, 22);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        good = true;
        magic[15] = 1;
    }
    else if (r == 3)
    {
        for (int i = 0; i < 14; i++) {
            gotoxy(20, i);
            printf("%s\n", feather_3[i]);
        }
        gotoxy(21, 15);
        printf("물건을 공중부양 시키는 주문을 배웠다! (윙가르디움 레비오우사 습득)");
        gotoxy(0, 18);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        good = true;
        magic[16] = 1;
    }
    else {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void Potions() {
    cls;
    if (SelectNum[2] == 0)
    {
        for (int i = 0; i < 12; i++) {
            gotoxy(30, i);
            printf("%s\n", potion_1[i]);
        }
        gotoxy(31, 13);
        printf("상처를 회복할 수 있는 약제를 만들었다! (체력 + 1)");
        gotoxy(0, 16);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[2]++;
        good = true;
    }
    else if (SelectNum[2] == 1)
    {
        for (int i = 0; i < 13; i++) {
            gotoxy(30, i);
            printf("%s\n", potion_2[i]);
        }
        gotoxy(25, 14);
        printf("마시면 강제로 진실을 말하게 되는 약제를 만들었다! (진실의 포션 획득)");
        gotoxy(0, 17);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[2]++;
        good = true;
    }
    else {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void HistoryOfMagic() {
    cls;
    if (SelectNum[3] == 0)
    {
        for (int i = 0; i < 10; i++) {
            gotoxy(30, i);
            printf("%s\n", book_1[i]);
        }
        gotoxy(28, 11);
        printf("마법의 역사에 대해 알게 되었다! (역사력 + 1)");
        gotoxy(0, 14);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[3]++;
        good = true;
        magic[3] = 1;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void DefenseAgainstDarkArts() {
    cls;
    int r = 0;
    while (SelectNum[4] < 3) {
        srand(time(NULL));
        r = (rand() % 3) + 1;  // 1~3 중 무작위
        if (!used_2[r - 1]) {
            used_2[r - 1] = true; // 이미 사용 표시
            SelectNum[4]++;
            break;
        }
    }
    if (r == 1)
    {
        for (int i = 0; i < 16; i++) {
            gotoxy(30, i);
            printf("%s\n", shield_1[i]);
        }
        gotoxy(26, 17);
        printf("상대를 기절시키는 주문을 배웠다! (스투페파이 습득)");
        gotoxy(0, 20);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        good = true;
        magic[11] = 1;
    }
    else if (r == 2)
    {
        for (int i = 0; i < 20; i++) {
            gotoxy(30, i);
            printf("%s\n", shield_2[i]);
        }
        gotoxy(21, 17);
        printf("상대를 무장해제 시키는 주문을 배웠다! (엑스펠리아르무스 습득)");
        gotoxy(0, 24);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        good = true;
        magic[12] = 1;
    }
    else if (r == 3)
    {
        for (int i = 0; i < 20; i++) {
            gotoxy(30, i);
            printf("%s\n", shield_3[i]);
        }
        gotoxy(26, 19);
        printf("디멘터를 퇴치하는 패트로누스 생성 마법을 배웠다! (엑스펙토 패트로눔 습득)");
        gotoxy(0, 24);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        good = true;
        magic[13] = 1;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }

    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void Herbology() {
    cls;
    if (SelectNum[5] == 0)
    {
        for (int i = 0; i < 18; i++) {
            gotoxy(30, i);
            printf("%s\n", herb_1[i]);
        }
        gotoxy(23, 19);
        printf("학교에 있는 약초의 종류에 대해 알게 되었다!");
        gotoxy(0, 22);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[5]++;
        good = true;
        magic[5] = 1;
    }
    else if (SelectNum[5] == 1)
    {
        for (int i = 0; i < 14; i++) {
            gotoxy(30, i);
            printf("%s\n", herb_2[i]);
        }
        gotoxy(23, 15);
        printf("금지된 숲에 있는 약초의 종류에 대해 알게 되었다!");
        gotoxy(0, 18);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[5]++;
        good = true;
        magic[5] = 2;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void Flying() {
    cls;
    if (SelectNum[6] == 0)
    {
        for (int i = 0; i < 15; i++) {
            gotoxy(20, i);
            printf("%s\n", fly_2[i]);
        }
        gotoxy(45, 16);
        printf("빗자루가 들썩인다...!");
        gotoxy(0, 19);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[6]++;
        good = true;
        magic[7] = 1;
    }
    else if (SelectNum[6] == 1)
    {
        for (int i = 0; i < 17; i++) {
            gotoxy(30, i);
            printf("%s\n", fly_1[i]);
        }
        gotoxy(31, 18);
        printf("빗자루가 공중에 떠오른다!");
        gotoxy(0, 21);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[6]++;
        good = true;
        magic[7] = 2;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void Apparition() {
    cls;
    if (SelectNum[7] == 0)
    {
        for (int i = 0; i < 24; i++) {
            gotoxy(10, i);
            printf("%s\n", people_1[i]);
        }
        gotoxy(30, 20);
        printf("몸에 이상한 기운이 느껴진다...");
        gotoxy(0, 28);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[7]++;
        good = true;
        magic[2] = 1;
    }
    else if (SelectNum[7] == 1)
    {
        int j = 9;
        for (int i = 0; i < 17; i++) {
            gotoxy(10, i);
            printf("%s\n", people_2[i]);
        }
        for (int i = 0; i < 8; i++) {
            gotoxy(50, j);
            printf("%s\n", people_2_1[i]);
            j++;
        }
        gotoxy(31, 18);
        printf("몸이 점멸한다...!");
        gotoxy(0, 21);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[7]++;
        good = true;
        magic[2] = 2;
    }
    else if (SelectNum[7] == 2)
    {
        for (int i = 0; i < 17; i++) {
            gotoxy(20, i);
            printf("%s\n", wall[i]);
        }
        for (int i = 0; i < 17; i++) {
            gotoxy(50, i);
            printf("%s\n", people_2[i]);
        }
        gotoxy(31, 18);
        printf("순간이동으로 벽을 넘을 수 있게 되었다!");
        gotoxy(0, 21);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[7]++;
        good = true;
        magic[2] = 3;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
void MagicalTheory()
{
    cls;
    if (SelectNum[8] == 0)
    {
        for (int i = 0; i < 10; i++) {
            gotoxy(30, i);
            printf("%s\n", brain[i]);
        }
        gotoxy(45, 11);
        printf("마법의 이론에 대해 알게 되었다!");
        gotoxy(0, 14);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        SelectNum[8]++;
        good = true;
        magic[6] = 1;
    }
    else
    {
        gotoxy(20, 5);
        printf("이제 남은 수업이 없습니다.");
        gotoxy(0, 13);
        printf("  > 돌 아 가 기 (스페이스바)    ");
        int n = KeyControl();
        if (n == 4) {  // 스페이스바가 눌렸을 때 종료
            good = false;
            GameStart();
        }
    }
    GradeNum++;
    if (GradeNum >= 3)
    {
        GradeNum = 1;
        Grade++;
    }
    int n = KeyControl();
    if (n == 4) {  // 스페이스바가 눌렸을 때 종료
        GameStart();
    }
}
int KeyControl() {
    char temp = getch();

    if (temp == 'w' || temp == 'W') {
        return UP;
    }
    else if (temp == 'a' || temp == 'A') {
        return LEFT;
    }
    else if (temp == 's' || temp == 'S') {
        return DOWN;
    }
    else if (temp == 'd' || temp == 'D') {
        return RIGHT;
    }
    else if (temp == ' ') {
        return SUBMIT;
    }
}
int Final()
{
    bool exit_loo = false;
    cls;
    for (int i = 0; i < 20; i++) {
        gotoxy(20, i);
        printf("%s\n", forest[i]);
    }
    gotoxy(20, 21);
    printf("금지된 숲에 들어선 당신, 무엇을 할까?");
    int x = 4, y = 23;
    gotoxy(2, y);
    printf("> 차원을 뛰어넘기위한 재료찾기 ");
    gotoxy(4, y + 2);
    printf("원래 세계로 돌아갈 포탈찾기");
    gotoxy(4, y + 4);
    printf("트롤족장에게 귀환서 받기");
    gotoxy(4, y + 6);
    printf("깊은 호수 속 빛나는 동굴 찾기");

    while (!exit_loo) {
        int n = KeyControl();
        switch (n) {
        case UP: {
            if (y > 23) {  // y 기준 변경
                gotoxy(x - 2, y);
                printf(" ");
                gotoxy(x - 2, y -= 2);
                printf(">");
            }
            break;
        }
        case DOWN: {
            if (y < 29) {  // y 기준 변경
                gotoxy(x - 2, y);
                printf(" ");
                y += 2;
                gotoxy(x - 2, y);
                printf(">");
            }
            break;
        }
        case SUBMIT: {
            if (y == 23)
            {
                if (magic[5] < 2)
                {
                    cls;
                    gotoxy(20, 5);
                    printf("약초에 대한 지식이 없던 당신은 재료를 찾지 못하고 금지된 숲을 헤매다 죽고 말았다.");
                    exit_loo = true;
                    Sleep(3000);
                    cls;
                    return 0;
                    //끝
                }
                else if (magic[2] < 2)
                {
                    cls;
                    gotoxy(20, 5);
                    printf("순간이동을 하지 못하는 당신은 약초의 도움을 받지 못하고 절망한다.");
                    exit_loo = true;
                    Sleep(3000);
                    cls;
                    return 0;
                    //끝
                }
                else if (magic[2] == 2 && magic[5] == 2)
                {
                    cls;
                    for (int i = 0; i < 17; i++) {
                        gotoxy(20, i);
                        printf("%s\n", lucky[i]);
                    }
                    gotoxy(20, 18);
                    printf("차원을 뛰어넘기위한 순간이동 각성 약초를 먹은 당신,\n   각성순간이동을 위해 순간이동 이론을 외운다. \n\n\n   [순간이동은 이동하고자 하는 OO, 가고싶은 공간의 OO, 순간적인 주문OO으로 실현된다.]\n\n\n   빈칸에 들어갈 말을 띄어쓰기없이 6자로 작성하시오.");
                    char name[20] = { 0 };
                    scanf("%s", name);
                    if (strcmp(name, "의지이해발현") == 0)
                    {
                        gotoxy(30, 5);
                        printf("우우웅!\n");
                        printf("나는 다시 원래 세계의 집으로 돌아왔다.\n");
                        printf("손에는 여전히 소설의 마지막 페이지가 들려 있다. \n");
                        printf("긴 이야기의 끝자락에 선 듯한 기분이다.\n");
                        printf("창밖에 노을이 지고 있다. 현실에서는 시간이 얼마 흐르지 않은 모양이다.\n");
                        printf("해리 포터를 좋아하는 독자로서 그 마법 세계는 참으로 매혹적이었다.\n");
                        printf("하지만 이곳에는 내게 전부인 사람들이 있다. 내가 전부인 사람들이 있다.\n");
                        return 0;
                    }
                    else
                    {
                        gotoxy(30, 5);
                        printf("각성순간이동을 실패한 당신은 공부하지않은 과거를 후회하며 죽고 말았다.");
                        return 0;
                    }
                }
            }
            else if (y == 25) {
                cls;
                gotoxy(20, 5);
                printf("포탈 따위는 없었다. 당신은 단서없이 금지된 숲을 헤매다 죽고 말았다.");
                exit_loo = true;
                Sleep(3000);
                cls;
                exit(0);
                //끝
            }
            else if (y == 27) {
                cls;
                gotoxy(20, 5);
                printf("트롤족장은 귀환서가 무엇인지도 몰랐다. 당신은 단서없이 금지된 숲을 헤매다 죽고 말았다.");
                exit_loo = true;
                Sleep(3000);
                cls;
                exit(0);
                //끝
            }
            else if (y == 29) {
                cls;
                gotoxy(20, 5);
                printf("호수 속엔 언제부터 있었는지도 모를 두개골만 남아있다. 당신은 단서없이 금지된 숲을 헤매다 죽고 말았다.");
                exit_loo = true;
                Sleep(3000);
                cls;
                exit(0);
                //끝
            }
            break;
        }
        }
    }
}
int DrawMenu() {
    int x = 50;
    int y = 13;

    printf(" __  __                                                    ____             __       __                     \n");
    printf("/\\ \\/\\ \\                                                  /\\  _`\\          /\\ \\__   /\\ \\__                  \n");
    printf("\\ \\ \\_\\ \\      __      _ __   _ __   __  __               \\ \\ \\L\\ \\  ___   \\ \\ ,_\\  \\ \\ ,_\\     __    _ __  \n");
    printf(" \\ \\  _  \\   /'__`\\   /\\`'__\\/\\`'__\\/\\ \\/\\ \\               \\ \\ ,__/ / __`\\  \\ \\ \\/   \\ \\ \\/   /'__`\\ /\\`'__\\\n");
    printf("  \\ \\ \\ \\ \\ /\\ \\L\\.\\_ \\ \\ \\/ \\ \\ \\/ \\ \\ \\_\\ \\               \\ \\ \\/ /\\ \\L\\ \\  \\ \\ \\_   \\ \\ \\_ /\\  __/ \\ \\ \\/ \n");
    printf("   \\ \\_\\ \\_\\\\ \\__/ \\.\\_\\ \\_\\  \\ \\_\\  \\/`____ \\               \\ \\_\\ \\ \\____/   \\ \\__\\   \\ \\__\\\\ \\____\\ \\ \\_\\ \n");
    printf("    \\/_/\\/_/ \\/__/\\/__/ \\/_/   \\/_/   `/___/> \\               \\/_/  \\/___/     \\/__/    \\/__/ \\/____/  \\/_/ \n");
    printf("                                         /\\___/                                                           \n");
    printf("                                         \\/__/                                                            \n");

    gotoxy(x - 2, y);
    printf("> 게 임 시 작 ");
    gotoxy(x, y + 2);
    printf("게 임 정 보 ");
    gotoxy(x, y + 4);
    printf("   종 료    ");

    while (1) {
        int n = KeyControl();
        switch (n) {
        case UP: {
            if (y > 13) {  // y 기준 변경
                gotoxy(x - 2, y);
                printf(" ");
                gotoxy(x - 2, y -= 2);
                printf(">");
            }
            break;
        }
        case DOWN: {
            if (y < 17) {  // y 기준 변경
                gotoxy(x - 2, y);
                printf(" ");
                y += 2;
                gotoxy(x - 2, y);
                printf(">");
            }
            break;
        }
        case SUBMIT: {
            return (y - 13) / 2;  // 시작: 0, 정보: 1, 종료: 2
        }
        }
    }
}
int GameStart() {
    cls;
    int current_x = 0, current_y = 0, current = 0, k = 0;
    int subject_x[6] = { 37, 57, 82, 57, 82 };  // 과목들의 x 좌표
    int subject_y[3] = { 4, 7, 10 };       // 과목의 y 좌표
    int subject_index[3][3] = {
    {0, 1, 2},     // 변신술, 어둠마법 방어술, 약초학
    {3, 4, 5},     // 마법의 역사, 비행수업, 마법 약학
    {6, 7, 8}    // 주문학 (한 칸만 있으므로 나머지는 -1)
    };
    bool exit_loop = false;
    if (Grade == 8)
    {
        bool exit_loo = false;
        cls;
        for (int i = 0; i < 18; i++) {
            gotoxy(30, i);
            printf("%s\n", castle[i]);
        }
        gotoxy(20, 19);
        printf("7년의 학교생활을 무사히 끝낸 당신, 원래 세계로 돌아가기위해 무엇을 할까?");
        int x = 4, y = 23;
        gotoxy(2, y);
        printf("> 호그와트의 꼭대기 ");
        gotoxy(4, y + 2);
        printf("금지된 숲 ");
        gotoxy(4, y + 4);
        printf("9와 3/4 승강장 ");

        while (!exit_loo) {
            int n = KeyControl();
            switch (n) {
            case UP: {
                if (y > 23) {  // y 기준 변경
                    gotoxy(x - 2, y);
                    printf(" ");
                    gotoxy(x - 2, y -= 2);
                    printf(">");
                }
                break;
            }
            case DOWN: {
                if (y < 27) {  // y 기준 변경
                    gotoxy(x - 2, y);
                    printf(" ");
                    y += 2;
                    gotoxy(x - 2, y);
                    printf(">");
                }
                break;
            }
            case SUBMIT: {
                if (y == 23)
                {
                    cls;
                    gotoxy(20, 5);
                    printf("어찌할지 몰라 호그와트의 꼭대기에 오른 당신은 원래 세계로 돌아기기에 실패한다.");
                    exit_loo = true;
                    Sleep(3000);
                    cls;
                    exit(0);
                    //끝
                }
                else if (y == 25) {

                    cls;
                    for (int i = 0; i < 16; i++) {
                        gotoxy(30, i);
                        printf("%s\n", police[i]);
                    }
                    gotoxy(20, 17);
                    printf("금지된 숲에 들어서려는 당신, 순찰을 돌던 선도부 학생에게 들킬 위험에 처한다!");
                    int x = 4, y = 21;
                    gotoxy(2, y);
                    printf("> 자 백 하 기 ");
                    gotoxy(4, y + 2);
                    printf("돌멩이로 변신하기 ");
                    gotoxy(4, y + 4);
                    printf("진실의 포션 먹이기 ");

                    while (!exit_loo) {
                        int n = KeyControl();
                        switch (n) {
                        case UP: {
                            if (y > 21) {  // y 기준 변경
                                gotoxy(x - 2, y);
                                printf(" ");
                                gotoxy(x - 2, y -= 2);
                                printf(">");
                            }
                            break;
                        }
                        case DOWN: {
                            if (y < 25) {  // y 기준 변경
                                gotoxy(x - 2, y);
                                printf(" ");
                                y += 2;
                                gotoxy(x - 2, y);
                                printf(">");
                            }
                            break;
                        }
                        case SUBMIT: {
                            if (y == 21)
                            {
                                cls;
                                gotoxy(15, 5);
                                printf("금지된 숲에 들어가려다 걸린 당신은 호그와트 진입 금지를 당하고 원래 세계로 돌아가기에 실패한다.");
                                exit_loo = true;
                                Sleep(3000);
                                cls;
                                exit(0);
                                //끝
                            }
                            else if (y == 23) {
                                cls;
                                if (magic[1] >= 1)
                                {
                                    Final();
                                }
                            }
                            else if (y == 25) {
                                if (magic[8] == 1)
                                {
                                    cls;
                                    gotoxy(15, 5);
                                    printf("학생에게 진실의 포션을 먹이고 껄끄러운 비밀을 알아낸뒤 협박하여 금지된 숲에 들어간다.");
                                    Sleep(3000);
                                    cls;
                                    Final();
                                }
                                else
                                {
                                    cls;
                                    gotoxy(15, 5);
                                    printf("진실의 포션이 없었다...");
                                    Sleep(3000);
                                    cls;
                                    exit(0);
                                }

                                //끝
                            }
                            break;
                        }
                        }
                    }
                }
                else if (y == 27) {
                    cls;
                    gotoxy(20, 5);
                    printf("어찌할지 몰라 9와 3/4 승강장에 도착한 당신은 원래 세계로 돌아가기에 실패한다.");
                    exit_loo = true;
                    Sleep(3000);
                    cls;
                    exit(0);
                    //끝
                }
                break;
            }
            }
        }
    }
    if (good&&!exit_loop)
    {
        //랜덤 이벤트 다루기
        int value = shuffled[index];
        exit_loop = false;
        switch (2) {
        case 1:
            for (int i = 0; i < 10; i++) {
                gotoxy(30, i);
                printf("%s\n", treasure[i]);
            }
            gotoxy(20, 11);
            printf("원래 세계로 돌아갈 단서를 찾기 위해 금지구역에 들어간 당신, 서랍에서 굳게 잠긴 상자를 발견했다.");
            int x = 4, y = 15;
            gotoxy(2, y);
            printf("> 무 시 한 다 ");
            gotoxy(4, y+2);
            printf("열 어 본 다 ");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 15) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 17) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 15) { cls;  Sleep(3000); exit_loop = true; }
                    else if (y == 17) {
                        if (magic[14] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("빛바랜 일기장이 들어있다.\n\n       [0월 00일 / 마침내 알아냈다. 금지된 숲에 있는 차원을 뛰어넘기 위한 재료만 있다면... 집으로 돌아갈 수 있어.]");
                            Sleep(5000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("알로호모라가 필요합니다....");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 2:
            for (int i = 0; i < 10; i++) {
                gotoxy(30, i);
                printf("%s\n", footpaint[i]);
            }
            gotoxy(20, 11);
            printf("금지구역에 들어가버린 당신, 오른쪽에서 교수님의 발소리가 들린다.");
            x = 4, y = 15;
            gotoxy(2, y);
            printf("> 자 백 한 다 ");
            gotoxy(4, y + 2);
            printf("쥐로 변신한다 ");
            gotoxy(4, y + 4);
            printf("순간이동한다 ");

            while (!exit_loop) {
                int n = KeyControl();
                
                switch (n) {
                case UP: {
                    if (y > 15) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 19) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 15) 
                    { 
                        cls;
                        gotoxy(30, 5);
                        printf("교수님께 무지하게 혼났다...<경고>");
                        Warning++;
                        if (Warning == 3)
                        {
                            Sleep(3000);
                            gotoxy(20, 5);
                            printf("경고가 3번 쌓여 퇴학 당합니다...");
                            Sleep(3000);
                            exit(0);
                        }
                    }
                    else if (y == 17) {
                        if (magic[1] == 2)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("들키지 않고 무사히 금지구역에서 빠져나왔다.");
                            Sleep(5000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("변신술을 더 수강해야합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    else if (y == 19)
                    {
                        if (magic[2] == 0)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("순간이동을 배우지 않았습니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        else
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("순간이동을 통해 무사히 금지구역에서 빠져나왔다.\n       하지만 높은 곳에서 떨어져 발목을 다치고 말았다...<부상>");
                            Heart--;
                            if (Heart == 0)
                            {
                                Sleep(3000);
                                printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                                Sleep(3000);
                                exit(0);
                            }
                            Sleep(5000);
                            cls;
                        }  
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 3:
            
            for (int i = 0; i < 7; i++) {
                gotoxy(30, i);
                printf("%s\n", meal[i]);
            }
            gotoxy(20, 8);
            printf("밥을 먹고 있는 당신, 옆의 무리에서 흥미로운 이야기를 하고 있는 소리가 들린다.");
            x = 4, y = 15;
            gotoxy(2, y);
            printf("> 무 시 한 다 ");
            gotoxy(4, y + 2);
            printf("이야기에 참여한다 ");
            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 15) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 17) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 15) { cls; Sleep(3000); exit_loop = true; }
                    else if (y == 17) {
                        if (magic[3] == 1)
                        {
                            cls;
                            gotoxy(20, 5);
                            printf("마법의 역사에 대한 이야기를 주고 받으며 순간이동 마법의 각성에 관한 단서를 얻었다.");
                            Sleep(5000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("내가 모르는 이야기다...나는 조용히 자리를 떠났다.");
                            Sleep(3000);
                            cls;
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 4:
            for (int i = 0; i < 15; i++) {
                gotoxy(30, i);
                printf("%s\n", punch[i]);
            }
            gotoxy(20, 16);
            printf("슬리데린 학생에게 시비가 걸린 당신, 분위기가 싸움을 예고하는 듯 점점 어두워 간다.\n   도망간다면 앞으로 계속 괴롭힘에 시달릴 것이다.");
            x = 4, y = 20;
            gotoxy(2, y);
            printf("> 선 빵 필 승! ");
            gotoxy(4, y + 2);
            printf("스투페파이로 기절시킨다. ");
            gotoxy(4, y + 4);
            printf("무장해제 시킨다. ");

            while (!exit_loop) {
                int n = KeyControl();

                switch (n) {
                case UP: {
                    if (y > 20) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 24) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 20)
                    {
                        cls;
                        gotoxy(20, 5);
                        printf("할 수 있는 주문이 없는 나는 주먹질을 했다. 교수님께 폭력행위로 경고를 받았다...<경고><부상>");
                        Warning++;
                        if (Warning == 3)
                        {
                            Sleep(3000);
                            cls;
                            gotoxy(20, 5);
                            printf("경고가 3번 쌓여 퇴학 당합니다...");
                            Sleep(3000);
                            exit(0);
                        }
                        Heart--;
                        if (Heart == 0)
                        {
                            Sleep(3000);
                            cls;
                            gotoxy(20, 5);
                            printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                            Sleep(3000);
                            exit(0);
                        }
                        Sleep(3000);
                        cls;
                        exit_loop = true;
                    }
                    else if (y == 22) {
                        if (magic[11] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("교수님이 기절한 녀석을 봐버렸다. 폭력행위로 경고를 받았다...<경고>");
                            Warning++;
                            Sleep(3000);
                            if (Warning == 3)
                            {
                                cls;
                                gotoxy(20, 5);
                                printf("경고가 3번 쌓여 퇴학 당합니다...");
                                Sleep(3000);
                                exit(0);
                            }
                            
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("스투페파이가 필요합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    else if (y == 24)
                    {
                        if (magic[12] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("아무것도 할 수 없는 녀석은 못마땅한 표정을 지으며 돌아갔다.");
                            Sleep(3000);
                            cls;
                        }
                        else
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("엑스펠리아르무스가 필요합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 5:
            for (int i = 0; i < 19; i++) {
                gotoxy(30, i);
                printf("%s\n", mirror[i]);
            }
            gotoxy(20, 20);
            printf("친구와 장난을 치던 당신, 뒤에 있던 거울을 넘어뜨려 깨뜨리고 말았다! <부상>");
            if (nu = 0)
            {
                Heart--;
                nu = 1;
            }
            
            if (Heart == 0)
            {
                Sleep(3000);
                cls;
                gotoxy(20, 5);
                printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                Sleep(3000);
                exit(0);
            }
            x = 4, y = 24;
            gotoxy(2, y);
            printf("> 자 백 한 다 ");
            gotoxy(4, y + 2);
            printf("수 리 한 다 ");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 24) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 26) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 24) { 
                        cls;
                        gotoxy(30, 5);
                        printf("교수님께 혼났다...<경고>");
                        Warning++;
                        Sleep(3000);
                        if (Warning == 3)
                        {
                            cls;
                            gotoxy(20, 5);
                            printf("경고가 3번 쌓여 퇴학 당합니다...");
                            Sleep(3000);
                            exit(0);
                        }
                        cls;
                        exit_loop = true; 
                    }
                    else if (y == 26) {
                        if (magic[15] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("거울을 고쳤다. 완벽하진 않지만 티나지도 않다.");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("레파로가 필요합니다....");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 6:
            for (int i = 0; i < 14; i++) {
                gotoxy(30, i);
                printf("%s\n", tree[i]);
            }
            gotoxy(20, 15);
            printf("학교 근처를 산책하는 당신, 여러 종류의 풀들이 보인다.");
            x = 4, y = 19;
            gotoxy(2, y);
            printf("> 즐거운 산책시간을 즐긴다. ");
            gotoxy(4, y + 2);
            printf("약 초 다! ");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 19) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 21) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 19) { cls;  Sleep(3000);  exit_loop = true; }
                    else if (y == 21) {
                        if (magic[5] >= 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("수업시간에 배운 약초를 발견했다.(체력 +1)");
                            Heart++;
                            if (Heart >= 3)
                            {
                                Heart = 3;
                            }
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("약초학의 지식이 부족합니다...");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 7:
            for (int i = 0; i < 10; i++) {
                gotoxy(20, i);
                printf("%s\n", book[i]);
            }
            gotoxy(20, 11);
            printf("도서관에 방문한 당신, 어떤 책을 읽을까?");
            x = 4, y = 15;
            gotoxy(2, y);
            printf("> 해리포터 영웅담 ");
            gotoxy(4, y + 2);
            printf("공중부양으로 괴롭히는 33가지의 방법 ");
            gotoxy(4, y + 4);
            printf("순간이동의 이론 ");

            while (!exit_loop) {
                int n = KeyControl();

                switch (n) {
                case UP: {
                    if (y > 15) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 19) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 15)
                    {
                        cls;
                        gotoxy(30, 5);
                        printf("재밌다. 하지만 이럴 때가 아닌 것 같다...");
                        Sleep(3000);
                        cls;
                        exit_loop = true;
                    }
                    else if (y == 17) {
                        if (magic[16] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("재밌다. 하지만 이럴 때가 아닌 것 같다...");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("윙가르디움 레비오우사가 필요합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    else if (y == 19)
                    {
                        if (magic[6] == 1)
                        {
                            cls;
                            gotoxy(20, 5);
                            printf("[순간이동은 이동하고자 하는 의지, 가고싶은 공간의 이해, 순간적인 주문발현으로 실현된다.]");
                            Sleep(5000);
                            cls;
                        }
                        else
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("마법 이론이 필요합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 8:
            for (int i = 0; i < 20; i++) {
                gotoxy(30, i);
                printf("%s\n", flypeople[i]);
            }
            gotoxy(20, 21);
            printf("퀴디치를 보던 중, 한 선수가 몸싸움으로 인해 균형을 잃고 당신에게 날아온다!");
            x = 4, y = 25;
            gotoxy(2, y);
            printf("> 으 악!");
            gotoxy(4, y + 2);
            printf("멈춰세운다. ");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 25) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 27) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 25) { 
                        cls; 
                        gotoxy(20, 5);  
                        printf("<부상>"); 
                        Heart--;
                        Sleep(3000);
                        if (Heart == 0)
                        {
                            cls;
                            gotoxy(20, 5);
                            printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                            Sleep(3000);
                            exit(0);
                        }
                        cls; 
                        exit_loop = true; 
                    }
                    else if (y == 27) {
                        if (magic[16] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("코 앞에서 간신히 멈춰세우는데 성공했다.");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("윙가르디움 레비오우사가 필요합니다....");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 9:
            for (int i = 0; i < 18; i++) {
                gotoxy(30, i);
                printf("%s\n", dumbell[i]);
            }
            gotoxy(20, 19);
            printf("요즘들어 운동이 필요하다고 느낀 당신, 퀴디치 선수 모집 공고를 발견한다.");
            x = 4, y = 23;
            gotoxy(2, y);
            printf("> 무 시 한 다");
            gotoxy(4, y + 2);
            printf("지 원 한 다 ");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 23) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 25) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 23) {
                        cls;
                        int ran = rand() % 2 + 1;
                        if (ran == 1)
                        {
                            printf("운동신경이 떨어진 당신은 계단에서 발을 헛디딘다. 운동 좀 할걸...<부상>");
                            Heart--;
                            Sleep(3000);
                            if (Heart == 0)
                            {
                                cls;
                                gotoxy(20, 5);
                                printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                                Sleep(3000);
                                exit(0);
                            }
                            cls;
                            exit_loop = true;
                        }
                        else
                        {
                            exit_loop = true;
                        }
                    }
                    else if (y == 25) {
                        if (magic[7] == 2)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("바람을 가르며 신나게 퀴디치를 즐긴다.");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("공중부양이 필요합니다....");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 10:
            for (int i = 0; i < 16; i++) {
                gotoxy(30, i);
                printf("%s\n", dragon[i]);
            }
            gotoxy(20, 17);
            printf("드래곤의 비행에 대해 조사하는 과제를 받게 된 당신, 비행수업을 전제하는 수업이었나보다!");
            x = 4, y = 21;
            gotoxy(2, y);
            printf("> 책에 있는 사진으로 얼렁뚱땅 넘어간다.");
            gotoxy(4, y + 2);
            printf("직접 촬영해 제출한다.");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 21) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 23) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 21) {
                        cls;
                        int ran = rand() % 10 + 1;
                        if (ran == 1 || rand == 2 || ran == 3 || rand == 4 || ran == 5 || rand == 6 || ran == 7 || rand == 8)
                        {
                            printf("교수님이 모를리가 없지...<경고>");
                            Warning++;
                            if (Warning == 3)
                            {
                                cls;
                                gotoxy(20, 5);
                                printf("경고가 3번 쌓여 퇴학 당합니다...");
                                Sleep(3000);
                                exit(0);
                            }
                            Sleep(3000);
                            cls;
                            exit_loop = true;
                        }
                        else
                        {
                            exit_loop = true;
                        }
                    }
                    else if (y == 23) {
                        if (magic[7] == 2)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("직접 촬영해 제출한다.");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("공중부양이 필요합니다....");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 11:
            for (int i = 0; i < 16; i++) {
                gotoxy(30, i);
                printf("%s\n", ghost[i]);
            }
            gotoxy(20, 17);
            printf("디멘터를 만났다!! 학교에 왜 디멘터가 있지???");
            x = 4, y = 21;
            gotoxy(2, y);
            printf("> 상식적이지 못한 상황이지만 어쩔 수 없이 순응하고 공격당한다.");
            gotoxy(4, y + 2);
            printf("엑스펙토 패트로눔!");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 21) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 23) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 21) 
                    {
                    cls;
                    gotoxy(30, 5);
                    printf("꿈이었다....! 하지만 정신적 충격이 크다. <부상>");
                    Heart--;
                    if (Heart == 0)
                    {
                        cls;
                        gotoxy(20, 5);
                        printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                        Sleep(3000);
                        exit(0);
                    }
                    Sleep(3000);
                    cls;
                    exit_loop = true; 
                    }
                    else if (y == 23) {
                        if (magic[13] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("꿈이었다...! 집이 그리워진다...");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("엑스펙토 패트로눔이 필요하다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 12:
            for (int i = 0; i < 16; i++) {
                gotoxy(30, i);
                printf("%s\n", mart[i]);
            }
            gotoxy(20, 17);
            printf("다이애건 앨리에서 쇼핑을 하던 당신, 길을 잘못들어 녹턴앨리에서 강도를 만났다!");
            x = 4, y = 21;
            gotoxy(2, y);
            printf("> 물건을 다 바친다 ");
            gotoxy(4, y + 2);
            printf("스투페파이로 기절시킨다 ");
            gotoxy(4, y + 4);
            printf("무장해제 시킨다. ");

            while (!exit_loop) {
                int n = KeyControl();

                switch (n) {
                case UP: {
                    if (y > 21) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 25) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 21)
                    {
                        cls;
                        gotoxy(30, 5);
                        printf("가진거 다 내놨는데도 한 대를 맞았다...<부상>");
                        Heart--;
                        if (Heart == 0)
                        {
                            cls;
                            gotoxy(20, 5);
                            printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                            Sleep(3000);
                            exit(0);
                        }
                        Sleep(3000);
                        cls;
                        exit_loop = true;
                    }
                    else if (y == 23) {
                        if (magic[11] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("강도를 기절시킨 뒤 잽싸게 도망쳤다.");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("스투페파이가 필요합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    else if (y == 25)
                    {
                        if (magic[12] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("무장해제는 소용이 없었다. 애초에 주먹으로 때릴 심산이었나보다. <부상>");
                            Heart--;
                            if (Heart == 0)
                            {
                                cls;
                                gotoxy(20, 5);
                                printf("컨디션 난조로 휴학을 하여 원래 세계로 돌아갈 시간을 잃었습니다...");
                                Sleep(3000);
                                exit(0);
                            }
                            Sleep(3000);
                            cls;
                        }
                        else
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("엑스펠리아르무스가 필요합니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 13:
            for (int i = 0; i < 10; i++) {
                gotoxy(30, i);
                printf("%s\n", boom[i]);
            }
            gotoxy(20, 11);
            printf("교내 반입 금지 폭죽을 시킨 당신, 부엉이에게 배달받으니 막상 양심이 찔리기 시작하는데...");
            x = 4, y = 15;
            gotoxy(2, y);
            printf("> 폭죽놀이를 한다. ");
            gotoxy(4, y + 2);
            printf("폐기한다.");

            while (!exit_loop) {
                int n = KeyControl();
                switch (n) {
                case UP: {
                    if (y > 15) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 17) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 17) { cls;  Sleep(3000); exit_loop = true; }
                    else if (y == 15) {
                        cls;
                        gotoxy(30, 5);
                        printf("교수님께 걸렸지만 정신건강에는 의미 있는 시간이었다.(체력 +1) <경고>");
                        Heart++;
                        if (Heart >= 3)
                        {
                            Heart = 3;
                        }
                        Warning++;
                        if (Warning == 3)
                        {
                            cls;
                            gotoxy(20, 5);
                            printf("경고가 3번 쌓여 퇴학 당합니다...");
                            Sleep(3000);
                            exit(0);
                        }
                        Sleep(3000);
                        cls;
                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        case 14:
            for (int i = 0; i < 15; i++) {
                gotoxy(30, i);
                printf("%s\n", face[i]);
            }
            gotoxy(20, 16);
            printf("집에 가고 싶다는 말을 달고 사는 당신의 친구! 혹시 너도 나와 같은...?!");
            x = 4, y = 20;
            gotoxy(2, y);
            printf("> 친구에게 물어본다 ");
            gotoxy(4, y + 2);
            printf("순순히 말할리가 없다! 진실의 포션을 강제로 먹인다. ");

            while (!exit_loop) {
                int n = KeyControl();

                switch (n) {
                case UP: {
                    if (y > 20) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        gotoxy(x - 2, y -= 2);
                        printf(">");
                    }
                    break;
                }
                case DOWN: {
                    if (y < 22) {  // y 기준 변경
                        gotoxy(x - 2, y);
                        printf(" ");
                        y += 2;
                        gotoxy(x - 2, y);
                        printf(">");
                    }
                    break;
                }
                case SUBMIT: {
                    if (y == 20)
                    {
                        cls;
                        gotoxy(30, 5);
                        printf("예상했지만 당연하게도 무슨소리냐며 발뺌함다.\n     진실의 포션이 있었다면 결정적인 단서를 공유할 수도 있었을 것이다...");
                        Sleep(5000);
                        cls;
                        exit_loop = true;
                    }
                    else if (y == 22) {
                        if (magic[8] == 1)
                        {
                            cls;
                            gotoxy(30, 5);
                            printf("집에 가고 싶은 친구의 맘을 너무나도 잘 알았다.\n      셜록홈즈를 안봐서인지 추리는 영 맞지않는군.");
                            Sleep(3000);
                            cls;
                        }
                        else {
                            cls;
                            gotoxy(30, 5);
                            printf("진실의 포션이 없습니다.");
                            Sleep(3000);
                            cls;
                            GameStart();
                        }

                        exit_loop = true;
                    }
                    break;
                }
                }
            }
            break;
        default:
            printf("알 수 없는 이벤트 값: %d\n", value);
            break;
        }

        index++;
    }
    cls;
    for (int i = 0; i < 13; i++) {
        printf("%s\n", harry1[i]);
    }
    gotoxy(90, 1);
    printf("경고 : %d     체력 : %d", Warning, Heart);
    gotoxy(57, 1);
    printf(" [ %d학년 %d학기 ] ", Grade, GradeNum);
    gotoxy(30, 2);
    printf(" _____________________________________________________________________");
    for (int i = 3; i <= 11; i++)
    {
        gotoxy(30, i);
        if (i == 4) {
            printf("|      > 변신술              어둠마법 방어술          약초학          | ");
        }
        else if (i == 7) {
            printf("|        마법의 역사         비행 수업                마법 약학       | ");
        }
        else if (i == 10) {
            printf("|        주문학              순간이동 수업            마법 이론       | ");
        }
        else {
            printf("|                                                                     | ");
        }
    }
    gotoxy(30, 12);
    printf(" ---------------------------------------------------------------------");
    gotoxy(subject_x[0], subject_y[0]);
    printf(">");
    gotoxy(0, 14);
    printf("%d학년 %d학기에 들을 수업을 고르세요. (ASDW로 이동 후 스페이스바를 눌러주세요!)", Grade, GradeNum);
    while (1) {
        int n = KeyControl();

        gotoxy(subject_x[current_x], subject_y[current_y]);
        printf(" ");

        switch (n) {
        case UP: {
            if (current_y > 0) {  // y 기준 변경
                current_y--;
            }
            gotoxy(subject_x[current_x], subject_y[current_y]);
            printf(">");
            break;
        }
        case DOWN: {
            // 아래로 이동 가능한지 체크 (subject_index로 검증하면 더 안정적)
            if (current_y < 2) {
                // 기존 커서 지우기
                gotoxy(subject_x[current_x], subject_y[current_y]);
                printf(" ");
                // y 좌표 증가 (아래로 이동)
                current_y++;

                // 새 위치에 커서 표시
                gotoxy(subject_x[current_x], subject_y[current_y]);
                printf(">");
            }
            else
            {
                gotoxy(subject_x[current_x], subject_y[current_y]);
                printf(">");
            }
            break;
        }
        case LEFT: {
            if (current_x > 0) {
                current_x--;
                current--;
            }
            gotoxy(subject_x[current_x], subject_y[current_y]);
            printf(">");
            break;
        }
        case RIGHT: {
            if (current_y == 0)
            {
                if (current_x < 2) {  // y 기준 변경
                    current_x++;
                    gotoxy(subject_x[current_x], subject_y[current_y]);
                    printf(">");
                }
                gotoxy(subject_x[current_x], subject_y[current_y]);
                printf(">");
            }
            else if (current_y == 1)
            {
                if (current_x < 2) {
                    if (current <= 2) {
                        current = 2;
                    }
                    current++;  // 먼저 증가
                    current_x++;  // x도 먼저 증가

                    gotoxy(subject_x[current_x], subject_y[current_y]);
                    printf(">");
                }
                else {
                    // 오른쪽 끝일 때 예외 처리
                    gotoxy(subject_x[current_x], subject_y[current_y]);
                    printf(" ");  // 기존 커서 지움
                    gotoxy(subject_x[current_x], subject_y[current_y]);
                    printf(">");  // 예외 상황 출력
                }
            }
            else if (current_y == 2)
            {
                if (current_x < 2) {  // y 기준 변경
                    current_x++;
                    gotoxy(subject_x[current_x], subject_y[current_y]);
                    printf(">");
                }
                gotoxy(subject_x[current_x], subject_y[current_y]);
                printf(">");
            }
            break;
        }
        case SUBMIT: {
            int select = subject_index[current_y][current_x];
            switch (select)
            {
            case 0: Transfiguration(); break;
            case 1: DefenseAgainstDarkArts(); break;
            case 2: Herbology(); break;
            case 3: HistoryOfMagic(); break;
            case 4: Flying(); break;
            case 5: Potions(); break;
            case 6: Spells(); break;
            case 7: Apparition(); break;
            case 8: MagicalTheory(); break;
            }
        }

        }
    }
}


